<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
               "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
lang="en" xml:lang="en">
<head>
<title>Starter Kit Gnus -- IMAP</title>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<meta name="generator" content="Org-mode"/>
<meta name="generated" content="2010-07-23 11:27:06 PDT"/>
<meta name="author" content="Eric Schulte"/>
<meta name="description" content=""/>
<meta name="keywords" content=""/>
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  html { font-family: Times, serif; font-size: 12pt; }
  .title  { text-align: center; }
  .todo   { color: red; }
  .done   { color: green; }
  .tag    { background-color: #add8e6; font-weight:normal }
  .target { }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  p.verse { margin-left: 3% }
  pre {
 border: 1pt solid #AEBDCC;
    padding: 5pt;
 font-family: courier, monospace;
        font-size: 90%;
        overflow:auto;
  }
  table { border-collapse: collapse; }
  td, th { vertical-align: top; }
  dt { font-weight: bold; }
  div.figure { padding: 0.5em; }
  div.figure p { text-align: center; }
  .linenr { font-size:smaller }
  .code-highlighted {background-color:#ffff00;}
  .org-info-js_info-navigation { border-style:none; }
  #org-info-js_console-label { font-size:10px; font-weight:bold;
                               white-space:nowrap; }
  .org-info-js_search-highlight {background-color:#ffff00; color:#000000;
                                 font-weight:bold; }
  /*]]>*/-->
</style><link rel="stylesheet" href="emacs.css" type="text/css"/>
<script type="text/javascript">
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="content">

<h1 class="title">Starter Kit Gnus &ndash; IMAP</h1>

<p>Based on the instructions at <a href="http://www.emacswiki.org/emacs/GnusGmail#toc2">emacswiki:GnusGmail</a>.
</p>
<p>
to use this file:
</p><ol>
<li>
<i>personal information</i> in this file (specifically in the code
blocks which will be tangled in the next step) globally replace
"your-name" with your gmail username, and "your-password" with your
gmail password.

</li>
<li>
<i>tangle this file</i> Run the <code>org-babel-tangle</code> command to extract
the code embedded in this file into a <code>starter-git-gnus-imap.el</code>
file which can be added to your configuration, and a <code>~/.authinfo</code>
file which will be used by gnus.

</li>
<li>
<i>load this configuration</i> If you have a recent version of Org-mode
(i.e. after 7.0) or are using the <a href="http://eschulte.github.com/emacs-starter-kit/">literate Emacs Starter Kit</a>, then
this file can be loaded directly using the <code>org-babel-load-file</code>
function, or by placing it in your load path (if you're using the
starter kit).

<p>
Alternately ensure that the <code>gnus-gmail.el</code> file generated by the
previous step is loaded by your configuration.
</p>
</li>
<li>
<i>fire up gnus</i> This can be done with the command <code>M-x gnus</code>

</li>
<li>
<i>view your mail</i> After gnus boots up you will see the "Group
Buffer" (see <a href="http://www.gnu.org/software/emacs/manual/html_node/gnus/index.html#toc_Group-Buffer">Group-Buffer</a>).  Each line is a mail "Group", hit
<code>SPACE</code> or <code>ENTER</code> on a group to view it's contents.  You should
see an "INBOX" group which contains the mail in your gmail account.
If not, you can jump to the "INBOX" group by
<ul>
<li>
pressing <code>j</code> for "jump"
</li>
<li>
tab completing the name "INBOX"
</li>
<li>
pressing <code>U</code> for "unkill" meaning this will now always be
displayed in your Group buffer when you have new mail

</li>
</ul>
</li>
<li>
<i>customize</i> Gnus has unrivalled capacity for customization.  Once
your comfortable with basic usage, take some time to browse through
the very readable <a href="http://www.gnu.org/software/emacs/manual/html_node/gnus/index.html">Gnus Manual</a> to learn untold tricks (see also
[[file:starter-kit-gnus.org::#customization][Starter-kit-<i>&lt;gnus:Customizations&gt;</i>]]).

</li>
</ol>

<div id="outline-container-1" class="outline-2">
<h2 id="sec-1">saving mail locally </h2>
<div class="outline-text-2" id="text-1">

<p>Where your mail will be saved locally default value will be <code>~/gmail</code>.
</p>


<pre class="src src-emacs-lisp"><span class="org-esk-paren">(</span><span class="org-keyword">require</span> '<span class="org-constant">gnus</span><span class="org-esk-paren">)</span>
<span class="org-esk-paren">(</span>setq nnml-directory <span class="org-string">"~/gmail"</span><span class="org-esk-paren">)</span>
<span class="org-esk-paren">(</span>setq message-directory <span class="org-string">"~/gmail"</span><span class="org-esk-paren">)</span>
</pre>



<p>
All Gmail groups will be ignored by the default value of
<code>gnus-ignored-newsgroups</code>, so let's change that default value.
</p>


<pre class="src src-emacs-lisp"><span class="org-esk-paren">(</span>setq gnus-ignored-newsgroups <span class="org-string">"^to\\.</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">^[0-9. ]+</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">(</span></span><span class="org-string"> </span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">$</span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">)</span></span><span class="org-string"><span class="org-regexp-grouping-backslash">\\</span></span><span class="org-string"><span class="org-regexp-grouping-construct">|</span></span><span class="org-string">^[\&#8221;]\&#8221;[#&#8217;()]"</span><span class="org-esk-paren">)</span>
</pre>



</div>

</div>

<div id="outline-container-2" class="outline-2">
<h2 id="sec-2">getting mail </h2>
<div class="outline-text-2" id="text-2">

<p>Set Gmail as the primary source for incoming mail (Gnus can aggregate
many email and/or newsgroup sources).
</p>


<pre class="src src-emacs-lisp"><span class="org-esk-paren">(</span>setq gnus-select-method
      '<span class="org-esk-paren">(</span>nnimap <span class="org-string">"gmail"</span>
               <span class="org-esk-paren">(</span>nnimap-address <span class="org-string">"imap.gmail.com"</span><span class="org-esk-paren">)</span>
               <span class="org-esk-paren">(</span>nnimap-server-port 993<span class="org-esk-paren">)</span>
               <span class="org-esk-paren">(</span>nnimap-stream ssl<span class="org-esk-paren">)))</span>
</pre>



<p>
Place a line like the following in <code>~/.authinfo</code>
</p>


<pre class="src src-fundamental">machine imap.gmail.com login your-name@gmail.com password your-password port 993
</pre>



<p>
and make sure that no-one else can read it with
</p>


<pre class="src src-sh">chmod 600 ~/.authinfo
</pre>



</div>

</div>

<div id="outline-container-3" class="outline-2">
<h2 id="sec-3">sending mail </h2>
<div class="outline-text-2" id="text-3">

<p><i>Requirement</i>: gnus uses the <a href="http://en.wikipedia.org/wiki/STARTTLS">starttls</a> tool for encrypted sending of
email to the Gmail SMTP server.  This is easily installed on modern
Debian (including Ubuntu) systems with
</p>


<pre class="src src-sh">apt-get install starttls
</pre>



<p>
The following configures gnus to use the Gmail SMTP server for sending
email.
</p>


<pre class="src src-emacs-lisp"><span class="org-esk-paren">(</span>setq message-send-mail-function 'smtpmail-send-it
      smtpmail-starttls-credentials '<span class="org-esk-paren">((</span><span class="org-string">"smtp.gmail.com"</span> 587 nil nil<span class="org-esk-paren">))</span>
      smtpmail-auth-credentials '<span class="org-esk-paren">((</span><span class="org-string">"smtp.gmail.com"</span> 587 <span class="org-string">"your-name@gmail.com"</span> nil<span class="org-esk-paren">))</span>
      smtpmail-default-smtp-server <span class="org-string">"smtp.gmail.com"</span>
      smtpmail-smtp-server <span class="org-string">"smtp.gmail.com"</span>
      smtpmail-smtp-service 587<span class="org-esk-paren">)</span>
</pre>



<p>
If you don't want to be prompted for a password on every mail sent,
you can add the following line to your <code>~/.authinfo</code>.
</p>


<pre class="src src-fundamental">machine smtp.gmail.com login your-name@gmail.com your-password secret port 587
</pre>


</div>
</div>

</div>
</body>
</html>
